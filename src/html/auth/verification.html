<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Your Account - TaskHive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link
			rel="shortcut icon"
			href="../../../images/taskhivelogo.svg"
			type="image/x-icon"
		/>
    
</head>
<body class="min-h-screen bg-gray-100 flex items-center justify-center overflow-hidden">
    <!-- Background Illustration -->
        <div class="absolute pointer-events-none flex items-center justify-center inset-0 ">
            <img src="../../../Assets/background-image.svg" alt="background-image">
    </div>
    <div class="w-full max-w-md relative">
        <div class="bg-white rounded-2xl shadow-lg p-8 text-center">

    <!-- Header -->
            <h1 class="text-3xl font-bold text-dark mb-8">Verify Your Account</h1>
            
            <!-- Email Icon -->
            <div class="w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-6">
                <img src="../../../Assets/Email-logo.svg" alt="Email-logo">
            </div>
            
            <!-- Description -->
            <div class="mb-6">
                <p class="text-gray-600 text-sm leading-relaxed">We just emailed you,</p>
                <p class="text-gray-600 text-sm leading-relaxed mb-4">please enter the code we sent you.</p>
                <!-- <p class="font-semibold text-gray-900">johndoe@gmail.com</p> -->
            </div>
            
            <!-- Confirmation Code Section -->
            <div class="mb-6">
                <h2 class="text-2xl font-semibold text-dark mb-4">Confirmation Code</h2>
                
                <!-- Code Input Fields -->
                <div class="flex justify-center gap-3 mb-4">
                    <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-lg font-semibold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors" data-index="0">
                    <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-lg font-semibold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors" data-index="1">
                    <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-lg font-semibold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors" data-index="2">
                    <input type="text" maxlength="1" class="code-input w-12 h-12 text-center text-lg font-semibold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors" data-index="3">
                </div>
                
                <!-- Status Messages -->
                <div id="successMessage" class="text-teal-500 text-sm mb-2 hidden">Code is Correct!</div>
                <div id="errorMessage" class="text-red-500 text-sm mb-2 hidden">The confirmation code is incorrect!</div>
                
                <!-- Timer -->
                <div id="timer" class="text-gray-700 text-sm mb-4">1:00</div>
                
                <!-- Resend Code -->
                <button id="resendBtn" class="text-blue-700 text-sm hover:underline disabled:text-gray-400 disabled:no-underline transition-colors" disabled>
                    Resend code
                </button>
            </div>
            
            <!-- Verify Button -->
            <button id="verifyBtn" class="w-full py-3 rounded-lg font-semibold mb-6 transition-all duration-200 hidden focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                Verify
            </button>
            
            <!-- Login Link -->
            <p class="text-gray-700 text-sm">
                Already have an account? 
                <a href="login.html" class="text-blue-700 hover:underline">Login</a>
            </p>
        </div>
    </div>

    <script>
        class VerificationForm {
            constructor() {
                this.codeInputs = document.querySelectorAll('.code-input');
                this.verifyBtn = document.getElementById('verifyBtn');
                this.resendBtn = document.getElementById('resendBtn');
                this.timer = document.getElementById('timer');
                this.successMessage = document.getElementById('successMessage');
                this.errorMessage = document.getElementById('errorMessage');
                
                this.correctCode = '5704'; // Demo correct code
                this.timeLeft = 60; // 1 minute
                this.timerInterval = null;
                
                this.init();
            }
            
            init() {
                this.setupInputHandlers();
                this.startTimer();
                this.updateVerifyButton();
            }
            
            setupInputHandlers() {
                this.codeInputs.forEach((input, index) => {
                    input.addEventListener('input', (e) => this.handleInput(e, index));
                    input.addEventListener('keydown', (e) => this.handleKeydown(e, index));
                    input.addEventListener('paste', (e) => this.handlePaste(e));
                });
                
                this.verifyBtn.addEventListener('click', () => this.handleVerify());
                this.resendBtn.addEventListener('click', () => this.handleResend());
            }
            
            handleInput(e, index) {
                const value = e.target.value.replace(/[^0-9]/g, '');
                e.target.value = value;
                
                if (value && index < this.codeInputs.length - 1) {
                    this.codeInputs[index + 1].focus();
                }
                
                this.clearMessages();
                this.updateVerifyButton();
            }
            
            handleKeydown(e, index) {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    this.codeInputs[index - 1].focus();
                }
                
                if (e.key === 'ArrowLeft' && index > 0) {
                    this.codeInputs[index - 1].focus();
                }
                
                if (e.key === 'ArrowRight' && index < this.codeInputs.length - 1) {
                    this.codeInputs[index + 1].focus();
                }
            }
            
            handlePaste(e) {
                e.preventDefault();
                const pastedData = e.clipboardData.getData('text').replace(/[^0-9]/g, '');
                
                for (let i = 0; i < Math.min(pastedData.length, this.codeInputs.length); i++) {
                    this.codeInputs[i].value = pastedData[i];
                }
                
                this.updateVerifyButton();
            }
            
            getCode() {
                return Array.from(this.codeInputs).map(input => input.value).join('');
            }
            
            updateVerifyButton() {
                const code = this.getCode();
                const isComplete = code.length === 4;
                
                // Show/hide button based on completion and set active state
                if (isComplete) {
                    this.verifyBtn.classList.remove('hidden', 'bg-gray-300', 'text-gray-500');
                    this.verifyBtn.classList.add('bg-blue-600', 'text-white', 'hover:bg-blue-500');
                    this.verifyBtn.disabled = false;
                } else {
                    this.verifyBtn.classList.add('hidden');
                    this.verifyBtn.classList.remove('bg-blue-600', 'text-white', 'hover:bg-blue-500');
                    this.verifyBtn.disabled = true;
                }
            }
            
            handleVerify() {
                const code = this.getCode();
                
                if (code === this.correctCode) {
                    this.showSuccess();
                } else {
                    this.showError();
                }
            }
            
            showSuccess() {
                this.clearMessages();
                this.successMessage.classList.remove('hidden');
                this.codeInputs.forEach(input => {
                    input.classList.remove('border-red-500');
                    input.classList.add('border-teal-500');
                });
            }
            
            showError() {
                this.clearMessages();
                this.errorMessage.classList.remove('hidden');
                this.codeInputs.forEach(input => {
                    input.classList.remove('border-teal-500');
                    input.classList.add('border-red-500');
                });
            }
            
            clearMessages() {
                this.successMessage.classList.add('hidden');
                this.errorMessage.classList.add('hidden');
                this.codeInputs.forEach(input => {
                    input.classList.remove('border-red-500', 'border-teal-500');
                });
            }
            
            startTimer() {
                this.updateTimerDisplay();
                this.timerInterval = setInterval(() => {
                    this.timeLeft--;
                    this.updateTimerDisplay();
                    
                    if (this.timeLeft <= 0) {
                        clearInterval(this.timerInterval);
                        this.enableResend();
                    }
                }, 1000);
            }
            
            updateTimerDisplay() {
                const minutes = Math.floor(this.timeLeft / 60);
                const seconds = this.timeLeft % 60;
                this.timer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
            
            enableResend() {
                this.resendBtn.disabled = false;
                this.resendBtn.classList.remove('text-gray-400');
                this.resendBtn.classList.add('text-blue-700');
                this.timer.textContent = '0:00';
            }
            
            handleResend() {
                if (this.resendBtn.disabled) return;
                
                // Reset timer
                this.timeLeft = 60;
                this.resendBtn.disabled = true;
                this.resendBtn.classList.add('text-gray-400');
                this.resendBtn.classList.remove('text-blue-700');
                
                // Clear form
                this.codeInputs.forEach(input => {
                    input.value = '';
                });
                this.clearMessages();
                // Hide button when form is cleared
                this.updateVerifyButton();
                this.codeInputs[0].focus();
                
                // Restart timer
                clearInterval(this.timerInterval);
                this.startTimer();
                
                console.log('Verification code resent!');
            }
        }
        
        // Initialize the form when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new VerificationForm();
        });
    </script>
</body>
</html>